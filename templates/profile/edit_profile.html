{% extends "base.html" %}
{% block title %}Edit Profile{% endblock %}

{% block content %}
  <div class="profile-edit-container">
    <h2>Edit Profile</h2>
    <p>Please complete your profile to help us serve you better!</p>
    <form method="post" action="{% url 'edit_profile' %}">
      {% csrf_token %}
      <!-- Gender field -->
      <div class="form-group">
        <label for="{{ form.gender.id_for_label }}">Gender:</label>
        {{ form.gender }}
      </div>

      <!-- Open to Dating -->
      <div class="form-group">
        <label for="{{ form.open_to_dating.id_for_label }}">Open to Dating:</label>
        {{ form.open_to_dating }}
      </div>

      <!-- Pronoun Preferences -->
      <div class="form-group">
        <label for="{{ form.pronoun_preference.id_for_label }}">Pronoun Preference:</label>
        {{ form.pronoun_preference }}
      </div>

      <!-- Custom Pronoun (only displayed when 'Other' is selected) -->
      <div class="form-group" id="custom-pronoun" style="display: none;">
        <label for="{{ form.custom_pronoun.id_for_label }}">Custom Pronoun:</label>
        {{ form.custom_pronoun }}
      </div>

      <button type="submit" class="btn btn-primary">Save</button>
    </form>
  </div>
  
  <!-- JavaScript to dynamically display the Custom Pronoun field -->
  <script>
    const pronounSelect = document.querySelector("#{{ form.pronoun_preference.id_for_label }}");
    const customPronounDiv = document.querySelector("#custom-pronoun");

    function toggleCustomPronoun() {
        if (pronounSelect.value === "other") {
            customPronounDiv.style.display = "block";
        } else {
            customPronounDiv.style.display = "none";
        }
    }

    pronounSelect.addEventListener("change", toggleCustomPronoun);

    // Call the function on page load to set the initial state
    window.addEventListener("DOMContentLoaded", (event) => {
        toggleCustomPronoun();
    });
  </script>
{% endblock %}
